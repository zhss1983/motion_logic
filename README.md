# motion logic

### Задача:
1) Создать Django (или любой известной вам ORM) проект в котором будет описана модель Restaurant.
2) Собрать с официальных сайтов Burger King, KFC и mcDonalds (только открытые) рестораны и сохранить в ранее созданную модель.
3) Посчитать сколько всего ресторанов у каждого из предприятий.
4) Загрузить рестораны (разделенные по предприятию) в pandas.
5) Проанализировать конкурентную среду в Москве, подготовить и представить выводы в свободной форме.
6) Загрузить все на github

Срока у тестового задания нет, но я прошу оценить и написать сколько времени это у вас займет.
Так же нет ограничений по библиотекам, базам данным и т.д.

## 1. Создал проект на базе Django REST Framework.
Проект работает как с БД SQLite, так и с PostgreSQL (в зависимости от установленного режима DEBUG).
БД PostgreSQL запущена в контейнере.

Проект можно запустить из папки restourant с помощью команды:

```/bin/bash
docker-compose build
docker-compose up
```

Если докер не установлен - проще всего сменить DEBUG в ./restourant/setup.py на True и запустиь стандартными средствами:

```/bin/bash
pip install -r requirement.txt
python manage.py runserver
```

Сервер запустится по адресу http://127.0.0.1:8000

## 2. Парсинг официальных сайтов Burger King, KFC и mcDonalds.

Для старта парсинга необходимо запустить POST запрос по адресам (полный текст ответа можно посмотреть в папке restouran/parser/result/
):

[http://127.0.0.1:8000/api/v1/parser/burger_king](http://127.0.0.1:8000/api/v1/parser/burger_king)

[http://127.0.0.1:8000/api/v1/parser/kfc](http://127.0.0.1:8000/api/v1/parser/kfc)

[http://127.0.0.1:8000/api/v1/parser/mcdonalds](http://127.0.0.1:8000/api/v1/parser/mcdonalds)

В результате будут произведены запросы к соответствующим api компаний и полученные данные будут добавлины в БД, если их там ранее не было.

Ответом будет количество добавленных записей.

Можно получить доступ к соответствующим таблицам по адресам:

[http://127.0.0.1:8000/api/v1/organisation/](http://127.0.0.1:8000/api/v1/organisation)
 Возможен поиск (?search=<название фирмы или адрес>).

[http://127.0.0.1:8000/api/v1/owner/](http://127.0.0.1:8000/api/v1/owner)
 Возможен поиск (?search=<название фирмы владельца>).

[http://127.0.0.1:8000/api/v1/phone/](http://127.0.0.1:8000/api/v1/phone)

[http://127.0.0.1:8000/api/v1/object_type/](http://127.0.0.1:8000/api/v1/object_type)

Отдельно добавил адрес [http://127.0.0.1:8000/api/v1/organisation_by_owner/](http://127.0.0.1:8000/api/v1/organisation_by_owner)
для выгрузки списка организаций в формате json (ручками). Так был выгружен файл pandas/test.json.

## 3. Посчитать сколько всего ресторанов у каждого из предприятий.
Количество было подсчитано через запрос SQL: SQL.txt

Так же количесиво подсчитано через Pandas. Скрипт лежит в pandas/pandas_converter.py Данный скрипт конвертирует json в csv и считает количество ресторанов с уникальными владельцами (KFC, Burger King и McDonalds).

## 4. Загрузить рестораны (разделенные по предприятию) в pandas.
Собственно уже выполнил - смотри пункт 3.

## 5. Проанализировать конкурентную среду в Москве, подготовить и представить выводы в свободной форме.
Экономичесикого образования не имею, знаниями в данной области не обладаю. Не считаю возможным делать какие либо выводы без соответствующих компетенций.
Как простой обыватель могу сказать по простому, в центре москвы от кафешек рябит в глазах, они там по всюду. По окрайнам уже полегче.

## 6. Загрузить все на github
[https://github.com/zhss1983/motion_logic/settings](https://github.com/zhss1983/motion_logic/settings)
